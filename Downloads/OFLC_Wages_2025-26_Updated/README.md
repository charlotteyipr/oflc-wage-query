# OFLC 薪资查询系统

这是一个基于OFLC 2025-26薪资数据的在线查询系统，支持三种查询模式。

## 功能特性

### 1. 根据职位名称查询
- **输入**: 职位名称 + 州/地区 + 县/镇(可选)
- **输出**: 显示该职位在该地区的Level 1-4年薪水平（去重显示）
- **示例**: 输入"Manager"、"California"、"Orange County"，查看管理职位在加州橙县的年薪水平
- **特色**: 支持模糊搜索，输入时自动显示匹配的职位和地区选项，自动去重，显示年薪

### 2. 根据薪资查询
- **输入**: 年薪范围 + 州/地区 + 县/镇(可选)
- **输出**: 显示Level 2薪资在指定年薪范围内的职位（去重显示）
- **示例**: 输入年薪范围$70,000-$80,000、"California"、"Orange County"，查找Level 2薪资在该范围内的职位
- **特色**: 支持模糊搜索，输入时自动显示匹配的地区选项，自动去重，显示年薪，专门基于Level 2筛选

### 3. 地区查询
- **输入**: 职位名称 + 目标Level + 目标年薪 + 州/地区(可选)
- **输出**: 显示可以达到该年薪水平的州/地区（去重显示）
- **示例**: 输入"Marketing Manager"、Level 2、$80,000、"California"，查找加州能达到该年薪的地区
- **特色**: 支持模糊搜索，输入时自动显示匹配的职位和地区选项，自动去重，显示年薪

### 4. 智能搜索功能
- **模糊匹配**: 所有输入框都支持模糊搜索，输入2个字符以上即可显示匹配选项
- **自动完成**: 职位名称、州名、县名都支持自动完成下拉选择
- **英文显示**: 所有职位名称、州名、县名都以英文显示，便于精确搜索

## 数据文件说明

### 核心数据文件
- **ALC_Export.csv**: 主要薪资数据，包含地区、职业代码、四个薪资级别等
- **Geography.csv**: 地理信息，包含地区代码、地区名称、州名、县名等
- **oes_soc_occs.csv**: 职业信息，包含职业代码、职业标题、职业描述等

### 其他文件
- **EDC_Export.csv**: 另一个薪资数据文件，结构略有不同
- **xwalk_plus.csv**: 交叉引用文件，包含职业代码映射
- **Excel文件**: 补充信息和文档

## 安装和运行

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行应用
```bash
python3 app.py
```

### 3. 访问系统
打开浏览器访问: http://localhost:8080

## 系统架构

### 后端 (Flask)
- **数据库**: SQLite，自动从CSV文件导入数据
- **API接口**: RESTful API，支持三种查询模式
- **数据处理**: 使用pandas处理CSV数据，sqlite3存储和查询

### 前端 (HTML/CSS/JavaScript)
- **框架**: Bootstrap 5
- **样式**: 现代化UI设计，响应式布局
- **交互**: AJAX异步查询，实时结果显示

## 测试系统

运行测试脚本验证所有功能：
```bash
python3 test_api.py
```

## 使用示例

### 根据职位名称查询示例
1. 在"根据职位名称查询"区域输入职位名称，如"Manager"（支持模糊搜索，会显示匹配的职位选项）
2. 输入州/地区，如"California"（支持模糊搜索，会显示匹配的州选项）
3. 可选输入县/镇，如"Orange County"（支持模糊搜索，会显示匹配的县选项，已去重）
4. 点击"查询薪资"按钮
5. 系统将显示管理职位在指定地区的Level 1-4年薪水平（自动去重，不显示平均薪资）

### 根据薪资查询示例
1. 在"根据薪资查询"区域输入年薪范围，如最低$70,000，最高$80,000
2. 输入州/地区，如"California"（支持模糊搜索）
3. 可选输入县/镇，如"Orange County"（支持模糊搜索）
4. 点击"根据薪资查询"按钮
5. 系统将显示在指定地区Level 2薪资在$70,000-$80,000范围内的职位（自动去重，不显示平均薪资）

### 地区查询示例
1. 在"地区查询"区域输入职位名称，如"Marketing Manager"（支持模糊搜索）
2. 选择目标Level，如"Level 2"
3. 输入目标年薪，如$80,000
4. 可选输入州/地区，如"California"（支持模糊搜索）
5. 点击"查询地区"按钮
6. 系统将显示能达到Level 2 $80,000年薪的地区（自动去重，不显示平均薪资）

## 注意事项

1. 所有查询都显示年薪（时薪×2080小时），统一使用年薪单位
2. 所有输入框都支持模糊匹配和自动完成
3. 职位名称、州名、县名都以英文显示
4. 县/镇字段为可选，不填写时会搜索整个州/地区
5. 所有查询都会自动去重，避免显示重复的职位-地区组合
6. 所有查询都不显示平均薪资，只显示Level 1-4年薪
7. 根据薪资查询专门基于Level 2进行筛选，只显示Level 2薪资在指定范围内的职位
8. 模糊搜索已优化，只显示真正包含搜索关键词的职位
9. 系统会自动创建数据库索引以提高查询性能
10. 首次运行时会自动导入CSV数据到SQLite数据库
11. 模糊搜索需要输入至少2个字符才会显示匹配选项

## 技术栈

- **后端**: Python Flask
- **数据库**: SQLite
- **数据处理**: Pandas
- **前端**: HTML5, CSS3, JavaScript, Bootstrap 5
- **图标**: Font Awesome

## 数据来源

数据来源于OFLC (Office of Foreign Labor Certification) 2025-26年度薪资数据。
